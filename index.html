<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Rocker Empire</title>

<style>
:root{
  --bg:#0e0e0e; --card:#1a1a1a; --accent:#b30000; --muted:#9aa0a6; --radius:14px;
}
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial}
body{margin:0;background:var(--bg);color:#fff}
.screen{display:none;padding:16px}
.screen.active{display:block}
h1,h2,h3{text-align:center;margin:10px 0}
button{width:100%;padding:14px;margin:8px 0;background:var(--accent);color:#fff;border:0;border-radius:var(--radius);font-size:16px}
button.secondary{background:#333}
.card{background:var(--card);padding:14px;border-radius:var(--radius);margin-bottom:12px}
nav{display:flex;gap:6px;justify-content:space-around;background:#111;position:sticky;top:0;padding:6px}
nav button{background:#222;font-size:14px}
.small{color:var(--muted);font-size:13px}
.region{border:1px solid #2a2a2a;padding:12px;border-radius:12px;margin-bottom:10px}
.locked{opacity:.5}
.hidden{display:none}

/* Grafik */
.low *{filter:none}
.medium *{filter:saturate(1.05)}
.high *{filter:saturate(1.15) contrast(1.05)}

/* Input */
.touch button{padding:18px}
.pc button{padding:10px}
</style>
</head>

<body class="touch medium">

<!-- START -->
<section id="start" class="screen active">
  <h1>ğŸï¸ Rocker Empire</h1>
  <button onclick="go('chars')">Spielen</button>
  <button class="secondary" onclick="go('settings')">Einstellungen</button>
</section>

<!-- CHARAKTERE -->
<section id="chars" class="screen">
  <h2>Charaktere</h2>
  <div id="charList"></div>
  <button onclick="go('create')">+ Neuer Charakter</button>
  <button class="secondary" onclick="go('start')">ZurÃ¼ck</button>
</section>

<!-- CREATE -->
<section id="create" class="screen">
  <h2>Neuer Charakter</h2>
  <div class="card">
    <input id="nameInput" placeholder="Name (nur Liga 4)">
    <select id="ligaInput" onchange="updateCreateUI()">
      <option value="4">Liga 4 â€“ Eigener Weg</option>
      <option value="3">Liga 3 â€“ Supporter</option>
    </select>
    <select id="mcSelect" class="hidden"></select>
    <button onclick="createChar()">Erstellen</button>
  </div>
</section>

<!-- GAME -->
<section id="game" class="screen">
  <div class="card" id="hud"></div>

  <nav>
    <button onclick="tab('char')">ğŸ‘¤</button>
    <button onclick="tab('map')">ğŸ—ºï¸</button>
    <button onclick="tab('market')">ğŸª</button>
    <button onclick="tab('war')">âš”ï¸</button>
    <button onclick="go('settings')">âš™ï¸</button>
  </nav>

  <div id="char" class="tab"></div>
  <div id="map" class="tab"></div>
  <div id="market" class="tab"></div>
  <div id="war" class="tab"></div>
</section>

<!-- SETTINGS -->
<section id="settings" class="screen">
  <h2>Einstellungen</h2>

  <div class="card">
    <h3>ğŸµ Musik</h3>
    <select id="musicToggle">
      <option value="on">An</option>
      <option value="off">Aus</option>
    </select>
    <input id="musicVol" type="range" min="0" max="100" value="40">
  </div>

  <div class="card">
    <h3>ğŸ¨ Grafik</h3>
    <select id="gfx">
      <option value="low">Low</option>
      <option value="medium" selected>Medium</option>
      <option value="high">High</option>
    </select>
  </div>

  <div class="card">
    <h3>ğŸ•¹ï¸ Optimierung</h3>
    <select id="inputMode">
      <option value="touch">Handy</option>
      <option value="pc">PC</option>
    </select>
  </div>

  <button class="secondary" onclick="go('start')">ZurÃ¼ck</button>
</section>

<script>
/* ================= BASIS ================= */
const SAVE_KEY="rocker_empire_fixed";

/* Regionen â€“ ganz Deutschland (Besitz NUR Liga 1) */
const REGIONS=[
  "Berlin","Brandenburg","Hamburg","Niedersachsen","NRW","Hessen",
  "Sachsen","Bayern","Baden-WÃ¼rttemberg","Mecklenburg-Vorpommern",
  "Schleswig-Holstein","ThÃ¼ringen","Sachsen-Anhalt"
];

/* Liga-3 Supporter (spielbar) */
const LIGA3_MCS=[
  "Bulldozer Cottbus",
  "Red Devils Support",
  "Support 81",
  "Free Riders",
  "Independent Brotherhood"
];

let state={
  chars:[],
  settings:{ musicToggle:"on", musicVol:40, gfx:"medium", inputMode:"touch" }
};
let current=null;

/* ================= NAV ================= */
function go(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function tab(id){
  document.querySelectorAll('.tab').forEach(t=>t.style.display="none");
  document.getElementById(id).style.display="block";
}

/* ================= SAVE ================= */
function save(){ localStorage.setItem(SAVE_KEY, JSON.stringify(state)); }
function load(){
  const d=localStorage.getItem(SAVE_KEY);
  if(d){ state=JSON.parse(d); }
}

/* ================= SETTINGS ================= */
function applySettings(){
  document.body.classList.remove("low","medium","high","touch","pc");
  document.body.classList.add(state.settings.gfx);
  document.body.classList.add(state.settings.inputMode);
  musicToggle.value=state.settings.musicToggle;
  musicVol.value=state.settings.musicVol;
  gfx.value=state.settings.gfx;
  inputMode.value=state.settings.inputMode;
}
musicToggle.onchange=()=>{ state.settings.musicToggle=musicToggle.value; save(); };
musicVol.oninput=()=>{ state.settings.musicVol=musicVol.value; save(); };
gfx.onchange=()=>{ state.settings.gfx=gfx.value; applySettings(); save(); };
inputMode.onchange=()=>{ state.settings.inputMode=inputMode.value; applySettings(); save(); };

/* ================= CREATE ================= */
function updateCreateUI(){
  mcSelect.classList.toggle("hidden", ligaInput.value==4);
  if(ligaInput.value==3){
    mcSelect.innerHTML="";
    LIGA3_MCS.forEach(m=>mcSelect.innerHTML+=`<option>${m}</option>`);
  }
}
function createChar(){
  const liga=+ligaInput.value;
  state.chars.push({
    liga,
    name: liga===4?(nameInput.value||"Rider"):mcSelect.value,
    mc: liga===4?"EigenstÃ¤ndig":mcSelect.value,
    members: liga===4?1:6,
    money: liga===4?500:2000,
    influence: liga>=3?40:0,
    weapons:0,
    chapter:false
  });
  save(); renderChars(); go('chars');
}

/* ================= UI ================= */
function renderChars(){
  charList.innerHTML="";
  state.chars.forEach((c,i)=>{
    charList.innerHTML+=`<button onclick="startGame(${i})">${c.name} (Liga ${c.liga})</button>`;
  });
}
function startGame(i){
  current=i;
  renderGame();
  go('game'); tab('char');
}
function renderGame(){
  const p=state.chars[current];
  hud.innerHTML=`<strong>${p.name}</strong><br>ğŸ’¶ ${p.money} â‚¬ | ğŸ‘¥ ${p.members} | ğŸ”« ${p.weapons}`;

  char.innerHTML=`
    <div class="card">
      Liga ${p.liga}<br>
      Club: ${p.mc}<br>
      Einfluss: ${p.influence}%<br>
      Chapter: ${p.chapter?"Ja":"Nein"}
    </div>
  `;

  map.innerHTML="";
  if(p.liga>=3){
    REGIONS.forEach(r=>{
      map.innerHTML+=`<div class="region">${r}<br>Besitzer: Liga-1-MC</div>`;
    });
  }else{
    map.innerHTML=`<div class="card small">Regionen ab Liga 3 sichtbar</div>`;
  }

  market.innerHTML=`
    <div class="card ${p.influence<50?'locked':''}">
      ğŸ”« Waffenmarkt (sichtbar ab Liga 3)<br>
      <button onclick="buyWeapon()">Waffe kaufen (1000 â‚¬)</button>
      <div class="small">${p.influence>=50?"Zugang mÃ¶glich":"Kein Zugang â€“ Einfluss < 50%"}</div>
    </div>
    ${p.liga>=3?'<div class="card">ğŸŒ¿ Biologische Drogen (ab Liga 3)</div>':''}
    ${p.liga>=2?'<div class="card">ğŸ§ª Chemische Drogen (ab Liga 2)</div>':''}
  `;

  war.innerHTML=`
    <div class="card">
      <button onclick="buyChapter()">Chapter erÃ¶ffnen (2000 â‚¬)</button>
    </div>
  `;
}

/* ================= ACTIONS ================= */
function buyWeapon(){
  const p=state.chars[current];
  if(p.influence<50 || p.money<1000) return alert("Kein Zugriff");
  p.money-=1000; p.weapons++; save(); renderGame();
}
function buyChapter(){
  const p=state.chars[current];
  if(p.liga<3 || p.members<6 || p.money<2000) return alert("Nicht mÃ¶glich");
  p.money-=2000; p.chapter=true; save(); renderGame();
}

/* ================= INIT ================= */
load(); applySettings(); renderChars(); updateCreateUI();
</script>

</body>
</html>
