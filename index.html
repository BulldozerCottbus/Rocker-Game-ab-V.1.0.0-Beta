<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rocker Empire</title>

<style>
:root{
  --bg:#0e0e0e;
  --card:#1a1a1a;
  --accent:#b30000;
  --muted:#9aa0a6;
  --radius:14px;
}
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial}
body{margin:0;background:var(--bg);color:#fff}
.screen{display:none;padding:16px}
.screen.active{display:block}
h1,h2,h3{text-align:center;margin:10px 0}
button{width:100%;padding:14px;margin:8px 0;background:var(--accent);color:#fff;border:0;border-radius:var(--radius);font-size:16px}
button.secondary{background:#333}
.card{background:var(--card);padding:14px;border-radius:var(--radius);margin-bottom:12px}
nav{display:flex;gap:6px;justify-content:space-around;background:#111;position:sticky;top:0;padding:6px}
nav button{background:#222;font-size:14px}
.small{color:var(--muted);font-size:13px}
.region{border:1px solid #2a2a2a;padding:12px;border-radius:12px;margin-bottom:10px;cursor:pointer}
.locked{opacity:.5}
.hidden{display:none}
</style>
</head>

<body>

<!-- START -->
<section id="start" class="screen active">
  <h1>ğŸï¸ Rocker Empire</h1>
  <button onclick="go('chars')">Spielen</button>
</section>

<!-- CHARAKTERE -->
<section id="chars" class="screen">
  <h2>Charaktere</h2>
  <div id="charList"></div>
  <button onclick="go('create')">+ Neuer Charakter</button>
</section>

<!-- CREATE -->
<section id="create" class="screen">
  <h2>Neuer Charakter</h2>
  <div class="card">
    <input id="nameInput" placeholder="Name (Liga 4)">
    <select id="ligaInput" onchange="updateCreateUI()">
      <option value="4">Liga 4 â€“ Eigener Weg</option>
      <option value="3">Liga 3 â€“ Supporter-MC</option>
    </select>
    <select id="mcSelect" class="hidden"></select>
    <button onclick="createChar()">Erstellen</button>
  </div>
</section>

<!-- GAME -->
<section id="game" class="screen">
  <div class="card" id="hud"></div>

  <nav>
    <button onclick="tab('char')">ğŸ‘¤</button>
    <button onclick="tab('map')">ğŸ—ºï¸</button>
    <button onclick="tab('shop')">ğŸª</button>
    <button onclick="tab('police')">ğŸš“</button>
  </nav>

  <div id="char" class="tab"></div>
  <div id="map" class="tab"></div>
  <div id="shop" class="tab"></div>
  <div id="police" class="tab"></div>
</section>

<!-- REGION PANEL -->
<section id="regionPanel" class="screen">
  <h2 id="regionTitle"></h2>
  <div class="card" id="regionInfo"></div>
  <button onclick="attackRegion()">âš”ï¸ Angreifen</button>
  <button class="secondary" onclick="go('game')">ZurÃ¼ck</button>
</section>

<script>
/* ================= BASIS ================= */
const SAVE_KEY="rocker_empire_master_step7";

/* Liga-1-MCs + LoyalitÃ¤t */
const MCs={
  "Hells Angels MC":{loyalty:40},
  "Bandidos MC":{loyalty:35},
  "Outlaws MC":{loyalty:30},
  "Pagans MC":{loyalty:30},
  "Sons of Silence":{loyalty:25}
};

/* Regionen (alle sichtbar, feste Besitzer) */
const REGIONS=[
  {name:"Berlin",owner:"Hells Angels MC"},
  {name:"Brandenburg",owner:"Hells Angels MC"},
  {name:"Sachsen",owner:"Hells Angels MC"},
  {name:"Hamburg",owner:"Bandidos MC"},
  {name:"Niedersachsen",owner:"Bandidos MC"},
  {name:"Schleswig-Holstein",owner:"Bandidos MC"},
  {name:"NRW",owner:"Outlaws MC"},
  {name:"Hessen",owner:"Outlaws MC"},
  {name:"Bayern",owner:"Pagans MC"},
  {name:"Baden-WÃ¼rttemberg",owner:"Pagans MC"},
  {name:"ThÃ¼ringen",owner:"Sons of Silence"},
  {name:"Sachsen-Anhalt",owner:"Sons of Silence"},
  {name:"Mecklenburg-Vorpommern",owner:"Sons of Silence"}
];

const LIGA3_MCS=[
  "Bulldozer Cottbus",
  "Red Devils Support",
  "Support 81",
  "Free Riders",
  "Independent Brotherhood"
];

let state={chars:[]};
let current=null;
let selectedRegion=null;

/* ================= NAV ================= */
function go(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
function tab(id){
  document.querySelectorAll(".tab").forEach(t=>t.style.display="none");
  document.getElementById(id).style.display="block";
}

/* ================= SAVE ================= */
function save(){localStorage.setItem(SAVE_KEY,JSON.stringify(state))}
function load(){const d=localStorage.getItem(SAVE_KEY);if(d)state=JSON.parse(d)}

/* ================= CREATE ================= */
function updateCreateUI(){
  mcSelect.classList.toggle("hidden",ligaInput.value==4);
  if(ligaInput.value==3){
    mcSelect.innerHTML="";
    LIGA3_MCS.forEach(m=>mcSelect.innerHTML+=`<option>${m}</option>`);
  }
}
function createChar(){
  const liga=+ligaInput.value;
  state.chars.push({
    liga,
    name:liga===4?(nameInput.value||"Rider"):mcSelect.value,
    mc:liga===4?"EigenstÃ¤ndig":mcSelect.value,
    members:liga===4?1:6,
    money:liga===4?500:2000,
    influence:liga===4?0:20,
    weapons:0,
    weed:0,
    heat:0
  });
  save();renderChars();go("chars");
}

/* ================= UI ================= */
function renderChars(){
  charList.innerHTML="";
  state.chars.forEach((c,i)=>{
    charList.innerHTML+=`<button onclick="startGame(${i})">${c.name} (Liga ${c.liga})</button>`;
  });
}
function startGame(i){
  current=i;
  renderGame();
  go("game");tab("char");
}
function renderGame(){
  const p=state.chars[current];
  hud.innerHTML=`${p.name} | ğŸ’¶ ${p.money} â‚¬ | ğŸ‘¥ ${p.members} | ğŸ”« ${p.weapons} | ğŸŒ¿ ${p.weed} | ğŸš“ Heat ${p.heat}%`;

  char.innerHTML=`
    Liga ${p.liga}<br>
    Club: ${p.mc}<br>
    Einfluss: ${p.influence}%
  `;

  map.innerHTML="";
  REGIONS.forEach((r,i)=>{
    map.innerHTML+=`
      <div class="region" onclick="openRegion(${i})">
        <strong>${r.name}</strong><br>
        Besitzer: ${r.owner}<br>
        LoyalitÃ¤t: ${MCs[r.owner].loyalty}%
      </div>`;
  });

  shop.innerHTML="";
  Object.keys(MCs).forEach(mc=>{
    const l=MCs[mc].loyalty;
    shop.innerHTML+=`
      <div class="card ${l<30?'locked':''}">
        <strong>${mc}</strong><br>
        LoyalitÃ¤t: ${l}%<br>
        <button onclick="buyWeed('${mc}')">ğŸŒ¿ Gras kaufen (500 â‚¬)</button>
        <button onclick="buyWeapon('${mc}')">ğŸ”« Waffe kaufen (1000 â‚¬)</button>
      </div>`;
  });

  police.innerHTML=`
    <div class="card">
      Heat: ${p.heat}%<br>
      <button onclick="bribePolice()">ğŸ’¸ Polizei schmieren</button>
    </div>
  `;
}

/* ================= REGION ================= */
function openRegion(i){
  selectedRegion=i;
  const r=REGIONS[i];
  regionTitle.textContent=r.name;
  regionInfo.innerHTML=`
    Besitzer: ${r.owner}<br>
    LoyalitÃ¤t: ${MCs[r.owner].loyalty}%<br>
    Dein Einfluss: ${state.chars[current].influence}%
  `;
  go("regionPanel");
}
function attackRegion(){
  const p=state.chars[current];
  const mc=REGIONS[selectedRegion].owner;
  if(p.weapons<=0)return alert("Keine Waffen");
  p.weapons--;
  p.heat+=15;
  MCs[mc].loyalty=Math.max(0,MCs[mc].loyalty-10);
  if(Math.random()<0.5){
    p.influence=Math.min(100,p.influence+15);
  }else{
    p.members=Math.max(1,p.members-1);
  }
  checkRaid();
  save();go("game");
}

/* ================= SHOP ================= */
function buyWeed(mc){
  const p=state.chars[current];
  if(p.money<500)return alert("Zu wenig Geld");
  p.money-=500;
  p.weed++;
  p.heat+=5;
  MCs[mc].loyalty=Math.min(100,MCs[mc].loyalty+3);
  save();renderGame();
}
function buyWeapon(mc){
  const p=state.chars[current];
  if(MCs[mc].loyalty<50)return alert("LoyalitÃ¤t zu gering");
  if(p.money<1000)return alert("Zu wenig Geld");
  p.money-=1000;
  p.weapons++;
  p.heat+=8;
  MCs[mc].loyalty=Math.min(100,MCs[mc].loyalty+2);
  save();renderGame();
}

/* ================= POLICE ================= */
function bribePolice(){
  const p=state.chars[current];
  const cost=p.liga===4?1000:3000;
  if(p.money<cost)return alert("Zu wenig Geld");
  p.money-=cost;
  p.heat=Math.max(0,p.heat-25);
  save();renderGame();
}
function checkRaid(){
  const p=state.chars[current];
  if(p.heat<70)return;
  if(Math.random()<p.heat/100){
    alert("ğŸš¨ Razzia!");
    p.money=Math.max(0,p.money-1000);
    p.weapons=Math.max(0,p.weapons-1);
    p.weed=Math.max(0,p.weed-1);
    p.members=Math.max(1,p.members-1);
    p.heat=50;
  }
}

/* ================= INIT ================= */
load();
renderChars();
</script>

</body>
</html>
