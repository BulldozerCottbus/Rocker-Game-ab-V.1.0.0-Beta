<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Rocker Empire</title>

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />

<style>
:root{
  --bg:#0e0e0e; --card:#1a1a1a; --accent:#b30000; --muted:#9aa0a6;
  --radius:14px;
}
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial}
html,body{margin:0;background:var(--bg);color:#fff}
.screen{display:none;padding:16px}
.screen.active{display:block}
h1,h2,h3{margin:10px 0;text-align:center}
button{
  width:100%; padding:14px; margin:8px 0;
  background:var(--accent); color:#fff; border:0; border-radius:var(--radius);
  font-size:16px; cursor:pointer
}
button.secondary{background:#333}
.card{
  background:var(--card); padding:14px; border-radius:var(--radius); margin-bottom:12px
}
.row{display:flex; gap:10px}
.row > *{flex:1}
input,select{
  width:100%; padding:12px; border-radius:12px; border:1px solid #333;
  background:#0b0b0b; color:#fff
}
nav{
  display:flex; gap:6px; justify-content:space-around;
  background:#111; position:sticky; top:0; padding:6px
}
nav button{background:#222; font-size:14px}
.small{color:var(--muted); font-size:13px}
.toggle{display:flex; align-items:center; justify-content:space-between}
.range{width:100%}
.hidden{display:none}

/* Grafik-Optionen */
.low *{filter:none}
.medium *{filter:saturate(1.05)}
.high *{filter:saturate(1.15) contrast(1.05)}

/* Touch-Ziele */
.touch button{padding:16px}
.pc button{padding:12px}

/* Sanfte √úberg√§nge */
.fade{animation:fade .2s ease}
@keyframes fade{from{opacity:.6} to{opacity:1}}
</style>
</head>

<body class="touch medium">

<!-- START -->
<section id="start" class="screen active fade">
  <h1>üèçÔ∏è Rocker Empire</h1>
  <div class="card">
    <p class="small" style="text-align:center">
      Core-Build ‚Ä¢ Stabil ‚Ä¢ Safari & PC
    </p>
    <button onclick="go('chars')">Spielen</button>
    <button class="secondary" onclick="go('settings')">Einstellungen</button>
  </div>
</section>

<!-- CHAR LIST -->
<section id="chars" class="screen fade">
  <h2>Charaktere</h2>
  <div id="charList"></div>
  <button onclick="go('create')">+ Neuer Charakter</button>
  <button class="secondary" onclick="go('start')">Zur√ºck</button>
</section>

<!-- CREATE -->
<section id="create" class="screen fade">
  <h2>Neuer Charakter</h2>
  <div class="card">
    <input id="nameInput" placeholder="Name" />
    <div class="row">
      <select id="ligaInput">
        <option value="4">Liga 4 ‚Äì Einzelg√§nger</option>
        <option value="3">Liga 3 ‚Äì Supporter</option>
      </select>
      <select id="ageInput">
        <option>21</option><option>25</option><option>30</option><option>35</option><option>40</option>
      </select>
    </div>
    <button onclick="createChar()">Erstellen</button>
  </div>
  <button class="secondary" onclick="go('chars')">Abbrechen</button>
</section>

<!-- GAME (nur HUD in Schritt 1) -->
<section id="game" class="screen fade">
  <div class="card" id="hud"></div>
  <nav>
    <button onclick="go('chars')">üë§ Charakter</button>
    <button onclick="go('settings')">‚öôÔ∏è Settings</button>
  </nav>
</section>

<!-- SETTINGS -->
<section id="settings" class="screen fade">
  <h2>Einstellungen</h2>

  <div class="card">
    <h3>üéµ Musik</h3>
    <div class="toggle">
      <span>Men√º-Musik</span>
      <select id="musicToggle" onchange="setMusic()">
        <option value="on">An</option>
        <option value="off">Aus</option>
      </select>
    </div>
    <input class="range" id="musicVol" type="range" min="0" max="100" value="40" oninput="setMusic()" />
    <div class="small">Lautst√§rke</div>
  </div>

  <div class="card">
    <h3>üé® Grafik</h3>
    <select id="gfx" onchange="setGfx()">
      <option value="low">Low</option>
      <option value="medium" selected>Medium</option>
      <option value="high">High</option>
    </select>
  </div>

  <div class="card">
    <h3>üïπÔ∏è Steuerung</h3>
    <select id="inputMode" onchange="setInput()">
      <option value="touch" selected>Handy (Touch)</option>
      <option value="pc">PC (Maus/Tastatur)</option>
    </select>
    <div class="small">Passt Button-Gr√∂√üe & Spacing an</div>
  </div>

  <button class="secondary" onclick="go('start')">Zur√ºck</button>
</section>

<!-- AUDIO (ruhige Men√º-Musik, frei verwendbar) -->
<audio id="music" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_0a8e7a9e2a.mp3?filename=ambient-piano-logo-112194.mp3" type="audio/mpeg">
</audio>

<script>
/* ================= CORE NAV ================= */
function go(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* ================= STATE ================= */
const SAVE_KEY="re_core_v1";
let chars=[];
let current=null;

/* ================= SAVE / LOAD ================= */
function save(){
  localStorage.setItem(SAVE_KEY, JSON.stringify({chars, settings: getSettings()}));
}
function load(){
  const raw=localStorage.getItem(SAVE_KEY);
  if(!raw) return;
  try{
    const data=JSON.parse(raw);
    chars=data.chars||[];
    applySettings(data.settings||{});
  }catch(e){}
}

/* ================= CHAR ================= */
function createChar(){
  const c={
    name: nameInput.value || "Rider",
    liga: +ligaInput.value,
    age: +ageInput.value
  };
  chars.push(c);
  save();
  renderChars();
  go('chars');
}
function renderChars(){
  charList.innerHTML="";
  chars.forEach((c,i)=>{
    const b=document.createElement('button');
    b.textContent=`${c.name} (Liga ${c.liga})`;
    b.onclick=()=>startGame(i);
    charList.appendChild(b);
  });
}
function startGame(i){
  current=i;
  hud.innerHTML = `
    <h3>${chars[i].name}</h3>
    <div class="small">Liga ${chars[i].liga} ‚Ä¢ Alter ${chars[i].age}</div>
    <p class="small">Schritt 1 aktiv ‚Äì Core stabil</p>
  `;
  go('game');
}

/* ================= SETTINGS ================= */
const musicEl=document.getElementById('music');
function setMusic(){
  const on = document.getElementById('musicToggle').value === 'on';
  const vol = document.getElementById('musicVol').value/100;
  musicEl.volume = vol;
  if(on){ musicEl.play().catch(()=>{}); }
  else{ musicEl.pause(); }
  save();
}
function setGfx(){
  document.body.classList.remove('low','medium','high');
  document.body.classList.add(document.getElementById('gfx').value);
  save();
}
function setInput(){
  document.body.classList.remove('touch','pc');
  document.body.classList.add(document.getElementById('inputMode').value);
  save();
}
function getSettings(){
  return {
    musicToggle: document.getElementById('musicToggle').value,
    musicVol: document.getElementById('musicVol').value,
    gfx: document.getElementById('gfx').value,
    inputMode: document.getElementById('inputMode').value
  };
}
function applySettings(s){
  if(!s) return;
  if(s.musicToggle) document.getElementById('musicToggle').value=s.musicToggle;
  if(s.musicVol) document.getElementById('musicVol').value=s.musicVol;
  if(s.gfx){ document.getElementById('gfx').value=s.gfx; setGfx(); }
  if(s.inputMode){ document.getElementById('inputMode').value=s.inputMode; setInput(); }
  setMusic();
}

/* ================= INIT ================= */
load();
renderChars();
applySettings(getSettings());
</script>
</body>
</html>
